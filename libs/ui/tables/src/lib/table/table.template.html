<table
  mat-table
  class="mat-elevation-z4"
  *ngIf="tableSource.length > 0"
  [dataSource]="tableSource"
>
  <ng-container
    *ngFor="let header of tableSource[0] | toRowDefinitions"
    [matColumnDef]="header"
  >
    <th mat-header-cell *matHeaderCellDef>{{header}}</th>
    <td mat-cell *matCellDef="let element; let rowIndex = index">
      <span
        *ngIf="badgeSource; else badgelessCell"
        [matBadge]="badgeSource?.[rowIndex]?.[+header] ?? ''"
        matBadgeOverlap="false"
        matBadgeSize="medium"
        [ngClass]="{'hidden-transport': !showZeros && !element[header]}"
      >
        {{element[header] || 0}}
      </span>
      <ng-template #badgelessCell>
        <span [ngClass]="{'hidden-transport': !showZeros && !element[header]}">
          {{element[header] || 0}}
        </span>
      </ng-template>
    </td>
  </ng-container>
  <tr
    mat-row
    *matRowDef="let row; columns: tableSource[0] | toRowDefinitions"
  ></tr>
</table>
